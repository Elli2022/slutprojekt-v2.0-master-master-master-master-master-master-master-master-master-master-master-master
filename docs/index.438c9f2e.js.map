{"mappings":"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","sources":["src/modules/index.ts"],"sourcesContent":["// Get the DOM elements\nconst imageSelection = document.getElementById(\"image-selection\") as HTMLSelectElement | null;\nconst loggedInUsersList = document.getElementById(\"logged-in-users\") as HTMLUListElement | null;\nconst createAccountButton = document.getElementById(\"create-account-button\") as HTMLButtonElement | null;\nconst submitButton = document.getElementById(\"submit-button\") as HTMLButtonElement | null;\nconst usernameInput = document.getElementById(\"username\") as HTMLInputElement | null;\nconst passwordInput = document.getElementById(\"password\") as HTMLInputElement | null;\nconst form = document.getElementById('form') as HTMLFormElement | null;\nconst errorMessage = document.createElement(\"p\");\nconst userDeletedSuccessfully = document.createElement('h1');\nconst failedToDeleteUser = document.createElement('h1');\nconst messageInput = document.createElement('input');\nconst listItem = document.createElement(\"li\");\nconst body = document.getElementById('body') as HTMLBodyElement;\nconst accountCreated = document.createElement(\"h1\");\nconst logInpage = document.createElement('div');\nlet loggedInUser = null; // Declare loggedInUser variable\n// let loggedInUser: UserInfo | undefined;\n\n\ninterface UserInfo {\n    userName: any;\n    password: string;\n    status: string;\n    imageurl: string;\n    newUser: boolean;\n}\n\ninterface FirebaseResponse {\n    [key: string]: UserInfo;\n}\n\nconst baseUrl = \"https://social-media-68d76-default-rtdb.europe-west1.firebasedatabase.app/\";\n\nasync function getUsers(): Promise<UserInfo[]> {\n    try {\n        \n        const response = await fetch(`${baseUrl}users.json`);\n\n        if (!response.ok) {\n            throw new Error(`Error: ${response.status} ${response.statusText}`);\n        }\n\n        const users: FirebaseResponse | null = await response.json();\n\n        if (!users) {\n            \n            return [];\n        }\n\n       \n        const usersArray: UserInfo[] = Object.values(users);\n    \n        return usersArray;\n\n    } catch (err) {\n     \n        throw new Error(\"Failed to fetch users\");\n    }\n}\n\n\n//uppdate the users array\nasync function saveUser(user: UserInfo): Promise<void> {\n  \n    const arrData = await getUsers();\n    ;\n\n    const url = `${baseUrl}users/${user.userName}.json`;\n    const init = {\n        method: \"PUT\",\n        body: JSON.stringify(user),\n        headers: {\n            \"Content-type\": \"application/json; charset=UTF-8\",\n        },\n    };\n\n    try {\n        const response = await fetch(url, init);\n\n        if (!response.ok) {\n            throw new Error(`Error: ${response.status} ${response.statusText}`);\n        }\n    } catch (err) {\n        console.log(err);\n        throw new Error(\"Failed to save user information.\");\n    }\n}\n\n\n//Event listener for the \"image dropdown\"\nif (imageSelection) {\n    imageSelection.addEventListener(\"change\", () => {\n        const selectedImageUrl = imageSelection.value;\n        imageSelection.value = selectedImageUrl;\n    });\n} else {\n    console.error(\"Image dropdown element not found.\");\n}\n\n\n// Event listener for the \"create account\" button\nif (createAccountButton && usernameInput && passwordInput) {\n    createAccountButton.addEventListener(\"click\", async () => {\n        userDeletedSuccessfully.textContent = \" \";\n        errorMessage.innerText = \" \";\n        const userName = usernameInput.value;\n        const password = passwordInput.value;\n\n       \n\n        if (!userName || !password) {\n            errorMessage.textContent = \"Username and / or password cannot be empty.\";\n            errorMessage.style.color = \"red\";\n            createAccountButton.insertAdjacentElement(\"afterend\", errorMessage);\n            return;\n        }\n\n        //check if username is available\n        const isAvailable = await isUsernameAvailable(userName);\n\n\n        if (!isAvailable) {\n            errorMessage.textContent = \"Username is already taken. Please choose another one.\";\n            errorMessage.style.color = \"red\";\n            createAccountButton.insertAdjacentElement(\"afterend\", errorMessage);\n            return;\n        }\n\n        body.appendChild(accountCreated);\n        accountCreated.textContent = \"Your account has been successfully created! You may now log in with your new account.\";\n\n        const userInfo: UserInfo = {\n            userName: userName,\n            password: password,\n            status: \"\",\n            imageurl: imageSelection?.value ?? \"\",\n            newUser: true,\n        };\n\n        await saveUser(userInfo);\n    });\n} else {\n    console.error(\"One or more DOM elements not found.\");\n}\n\n\n//control already existing users\nasync function isUsernameAvailable(username: string): Promise<boolean> {\n    const users = await getUsers();\n    //checks if there's any user in the array with the same username using the some() method.\n    return !users.some((user) => user.userName === username);\n}\n\n// Displaying already logged in users\nfunction displayLoggedInUsers(users: UserInfo[]): void {\n    if (!loggedInUsersList) {\n        console.error(\"Logged-in users list element not found.\");\n        return;\n    }\n\n    loggedInUsersList.innerHTML = \"\";\n\n    for (const user of users) {\n        if (!user.newUser) {\n            const listItem = document.createElement(\"li\");\n            listItem.textContent = `${user.userName} - Status: ${user.status}`;\n\n            // Create an img element and set its src attribute to the user's image URL\n            const userImage = document.createElement(\"img\");\n            userImage.src = user.imageurl;\n            userImage.style.width = \"50px\";\n            userImage.style.height = \"50px\";\n\n            // Append the img element to the list item\n            listItem.appendChild(userImage);\n            loggedInUsersList.appendChild(listItem);\n\n            // Event listener to the list item\n            listItem.addEventListener(\"click\", () => {\n                displayUserPage(user);\n        \n            });\n        }\n    }\n}\n\n// Event listener for the \"submit\" button\nif (submitButton && usernameInput && passwordInput) {\n    submitButton.addEventListener(\"click\", async (event: MouseEvent) => {\n        event.preventDefault();\n        accountCreated.textContent = \" \";\n        // Remove error message if it exists\n        errorMessage.textContent = \" \";\n        const password = passwordInput.value;\n        const users = await getUsers();\n        const user = users.find((u) => u.userName === usernameInput.value);\n        errorMessage.textContent = \"Log In Successfull! \";\n        console.log(\"INPUTUSERNAME FRÅN SUBMIT\",usernameInput.value)\n        console.log(\"USER.USERNAME FRÅN SUBMIT\", user.userName);\n\n        //if no user is found\n        if (!user) {\n            errorMessage.textContent = \"No account found for this user. Please create an account first.\";\n            errorMessage.style.color = \"red\";\n            form?.appendChild(errorMessage);\n            return;\n        }\n\n        //password check\n        if (user.password !== password) {\n            errorMessage.textContent = \"Incorrect password. Please try again.\";\n            errorMessage.style.color = \"red\";\n            form?.appendChild(errorMessage);\n            return;\n        }\n\n        //--------------------------STATUS WALL FOR ALL USERS--------------------------//\n        // Update the user's status\n        user.newUser = false;\n        await saveUser(user);\n\n        // Display logged-in users\n        displayLoggedInUsers(await getUsers());\n\n\n        //Log in div for when the user is logged in, all statusmessages shown here\n        form!.style.display = \"none\";\n\n        // const logInpage = document.createElement('div');\n        logInpage.innerHTML = `<h1>Welcome ${usernameInput.value}!</h1> `;\n        document.body.appendChild(logInpage);\n        logInpage.appendChild(loggedInUsersList!)\n        loggedInUsersList!.style.display = \"block\";\n        messageInput.style.display = \"block\";\n        messageInput.value = \"\";\n        messageInput.id = \"status\";\n        document.body.appendChild(messageInput);\n        messageInput.style.width = \"100px\";\n        const sendMessageButton = document.createElement('button');\n        sendMessageButton.innerText = \"Send statusmessage! \"\n        sendMessageButton.style.width = \"110px\";\n        document.body.appendChild(sendMessageButton);\n\n        const deleteButton2 = document.createElement('button');\n        deleteButton2.innerText = \"Delete User\";\n        document.body.appendChild(deleteButton2);\n\n\n        deleteButton2?.addEventListener(\"click\", async (event) => {\n            event?.preventDefault();\n            listItem.textContent = \" \";\n            if (usernameInput) {\n                await deleteUser(usernameInput.value);\n                errorMessage.textContent = \" \";\n            } else {\n                console.error(\"Username input element not found.\");\n            }\n        });\n\n        async function deleteUser(username: string): Promise<void> {\n            console.log(\"Deleting user\");\n            const url = `${baseUrl}users/${username}.json`;\n            const init = {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-type\": \"application/json; charset=UTF-8\",\n                },\n            };\n\n            try {\n                const response = await fetch(url, init);\n\n                if (!response.ok) {\n                    throw new Error(`Error: ${response.status} ${response.statusText}`);\n                }\n                console.log(\"User deleted successfully\");\n                userDeletedSuccessfully.textContent = \"User deleted successfully!\"\n                document.body.appendChild(userDeletedSuccessfully);\n\n                // Display logged-in users\n                displayLoggedInUsers(await getUsers());\n\n                //takes away the logged in page and back to the login page\n                messageInput.style.display = \"none\";\n                logInpage.innerHTML = \"\";\n                sendMessageButton.style.display = \"none\";\n                logOutButton!.style.display = \"none\";\n                deleteButton2!.style.display = \"none\";\n                userDeletedSuccessfully.textContent = \" \"\n                form!.style.display = \"block\";\n                // usernameInput!.value =\"\";\n                passwordInput!.value = \"\";\n                errorMessage.textContent = \" \";\n                logInpage!.style.display = \"none\";\n                loggedInUsersList!.style.display = \"none\";\n\n            } catch (err) {\n                console.log(err);\n                failedToDeleteUser.textContent = \"Failed to delete user. Please try again.\";\n                document.body.appendChild(failedToDeleteUser);\n                throw new Error(\"Failed to delete user.\");\n            }\n        }\n\n\n        //event listener for button to send statusmessage\n        sendMessageButton.addEventListener(\"click\", async () => {\n            const status = messageInput.value;\n            //PROBLEM HÄR!!!!!!!!!!! FUNKAR nu? TEST JAAAAA det funkar jag är ett fucking geni.(oftast inte. Bara ibland. som här)\n            const url = `${baseUrl}users/${user.userName}/status.json`;\n            const init = {\n                method: \"PUT\",\n                body: JSON.stringify(status),\n                headers: {\n                    \"Content-type\": \"application/json; charset=UTF-8\",\n                },\n            };\n            try {\n                const response = await fetch(url, init);\n\n                if (!response.ok) {\n                    throw new Error(`Error: ${response.status} ${response.statusText}`);\n                }\n            } catch (err) {\n                console.log(err);\n                throw new Error(\"Failed to save user information.\");\n            }\n\n            // Display logged-in users\n            displayLoggedInUsers(await getUsers());\n            messageInput.value = \"\";\n        });\n\n        //Log out button to log out user and take user back to login page with username input and password input but with the user still registred in the database\n        const logOutButton = document.createElement('button');\n        logOutButton.textContent = \"Log Out\";\n        document.body.appendChild(logOutButton);\n        logOutButton.addEventListener(\"click\", backToMainPage);\n        function backToMainPage() {\n            //takes away the logged in page and back to the login page\n            messageInput.style.display = \"none\";\n            logInpage.innerHTML = \"\";\n            sendMessageButton.style.display = \"none\";\n            logOutButton!.style.display = \"none\";\n            deleteButton2!.style.display = \"none\";\n            userDeletedSuccessfully.textContent = \" \"\n            form!.style.display = \"block\";\n            // usernameInput!.value =\"\";\n            passwordInput!.value = \"\";\n            errorMessage.textContent = \" \";\n            logInpage!.style.display = \"none\";\n            loggedInUsersList!.style.display = \"none\";\n            window.location.reload();\n        }\n\n    });\n} else {\n    console.error(\"One or more DOM elements not found.\");\n}\n\n//----------------------------------EACH USER'S PAGE-------------------------------------//\n//function for displayin user page\nfunction displayUserPage(user: UserInfo): void {\n    document.body.innerHTML = \"\";\n    form!.style.display = \"none\";\n    const usersPage = document.createElement('div');\n    usersPage.innerHTML = `<h1>Welcome to ${user.userName}'s page! </br> Status: ${user.status}</h1>`;\n    document.body.appendChild(usersPage);\n\n    // Create an img element and set its src attribute to the user's image URL\n    const userImage = document.createElement(\"img\");\n    userImage.src = user.imageurl;\n    userImage.style.width = \"50px\";\n    userImage.style.height = \"50px\";\n    usersPage.appendChild(userImage);\n\n    const backToLogInPageButton = document.createElement(\"button\");\n    backToLogInPageButton.textContent = \"Back to users status wall\";\n    document.body.appendChild(backToLogInPageButton);\n     // Event listener for the button to get the user back to all users status wall\n    backToLogInPageButton.addEventListener(\"click\", async (event) => {\n        event.preventDefault();\n        console.log(\"NAMEINPUT FRÅN BACKTOLOGIN\",usernameInput.value)\n        console.log(\"USER.USERNAME FRÅN BACKTOLOGIN\",user.userName);\n        backToLogInPageButton.style.display = \"none\";\n        loggedInUsersList!.style.display = \"block\";\n        messageInput.style.display = \"block\";\n        messageInput.value = \"\";\n        accountCreated.textContent = \" \";\n        // Remove error message if it exists\n        errorMessage.textContent = \" \";\n        \n        // //Log in div for when the user is logged in, all statusmessages shown here\n        const logInpage = document.createElement('div');\n        document.body.appendChild(logInpage);\n        messageInput.id = \"status\";\n        document.body.appendChild(messageInput);\n        messageInput.style.width = \"100px\";\n        logInpage.appendChild(loggedInUsersList!)\n        \n        const sendMessageButton = document.createElement('button');\n        sendMessageButton.innerText = \"Send statusmessage! \"\n        sendMessageButton.style.width = \"110px\";\n        document.body.appendChild(sendMessageButton);\n        // usersPage.innerHTML = \" \";\n        usersPage.innerHTML = `Logged-in user:${user.userName}</h1>`;\n\n\n        //event listener for button to send statusmessage\n        sendMessageButton.addEventListener(\"click\", async () => {\n            const status = messageInput.value;\n            const url = `${baseUrl}users/${user.userName}/status.json`;\n            const init = {\n                method: \"PUT\",\n                body: JSON.stringify(status),\n                headers: {\n                    \"Content-type\": \"application/json; charset=UTF-8\",\n                },\n            };\n            try {\n                const response = await fetch(url, init);\n                if (!response.ok) {\n                    throw new Error(`Error: ${response.status} ${response.statusText}`);\n                }\n\n                // Update the user.status with the new status\n                user.status = status;\n                \n            } catch (err) {\n                console.log(err);\n                throw new Error(\"Failed to save user information.\");\n            }\n            // Display logged-in users\n            displayLoggedInUsers(await getUsers());\n            messageInput.value = \"\";\n        });\n\n        //deletebutton for deleting the user from the current page\n        const deleteButton2 = document.createElement('button');\n        deleteButton2.innerText = \"Delete User\";\n        document.body.appendChild(deleteButton2);\n\n        deleteButton2?.addEventListener(\"click\", async (event) => {\n            event?.preventDefault();\n            listItem.textContent = \" \";\n            if (usernameInput) {\n                await deleteUser(usernameInput.value);\n                errorMessage.textContent = \" \";\n            } else {\n                console.error(\"Username input element not found.\");\n            }\n        });\n\n        async function deleteUser(username: string): Promise<void> {\n            console.log(\"Deleting user\");\n            const url = `${baseUrl}users/${username}.json`;\n            const init = {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-type\": \"application/json; charset=UTF-8\",\n                },\n            };\n\n            try {\n                const response = await fetch(url, init);\n\n                if (!response.ok) {\n                    throw new Error(`Error: ${response.status} ${response.statusText}`);\n                }\n                // Display logged-in users\n                displayLoggedInUsers(await getUsers());\n\n                //takes away the logged in page and back to the login page\n                messageInput.style.display = \"none\";\n                logInpage.innerHTML = \"\";\n                sendMessageButton.style.display = \"none\";\n                deleteButton2.style.display = \"none\";\n                userDeletedSuccessfully.textContent = \" \"\n                usersPage.innerHTML = \" \";\n                console.log(\"User deleted successfully\");\n                userDeletedSuccessfully.textContent = \"User deleted successfully!\"\n                document.body.appendChild(userDeletedSuccessfully);\n\n            } catch (err) {\n                console.log(err);\n                failedToDeleteUser.textContent = \"Failed to delete user. Please try again.\";\n                document.body.appendChild(failedToDeleteUser);\n                throw new Error(\"Failed to delete user.\");\n            }\n        }\n    });\n}\n"],"names":["$f9b32f98613e0134$var$imageSelection","document","getElementById","$f9b32f98613e0134$var$loggedInUsersList","$f9b32f98613e0134$var$createAccountButton","$f9b32f98613e0134$var$submitButton","$f9b32f98613e0134$var$usernameInput","$f9b32f98613e0134$var$passwordInput","$f9b32f98613e0134$var$form","$f9b32f98613e0134$var$errorMessage","createElement","$f9b32f98613e0134$var$userDeletedSuccessfully","$f9b32f98613e0134$var$failedToDeleteUser","$f9b32f98613e0134$var$messageInput","$f9b32f98613e0134$var$listItem","$f9b32f98613e0134$var$body","$f9b32f98613e0134$var$accountCreated","$f9b32f98613e0134$var$logInpage","$f9b32f98613e0134$var$baseUrl","async","$f9b32f98613e0134$var$getUsers","response","fetch","ok","Error","status","statusText","users","json","Object","values","err","$f9b32f98613e0134$var$saveUser","user","url","userName","init","method","body","JSON","stringify","headers","console","log","$f9b32f98613e0134$var$displayLoggedInUsers","innerHTML","newUser","listItem","textContent","userImage","src","imageurl","style","width","height","appendChild","addEventListener","$f9b32f98613e0134$var$displayUserPage","error","display","usersPage","backToLogInPageButton","event","preventDefault","value","logInpage","id","sendMessageButton","innerText","deleteButton2","username","deleteUser","selectedImageUrl","password","color","insertAdjacentElement","some","$f9b32f98613e0134$var$isUsernameAvailable","userInfo","find","u","logOutButton","window","location","reload"],"version":3,"file":"index.438c9f2e.js.map"}